<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (19) on Tue Apr 18 14:56:26 CEST 2023 -->
<title>org.klojang.templates (Klojang Templates)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-04-18">
<meta name="description" content="declaration: module: org.klojang.templates">
<meta name="generator" content="javadoc/ModuleWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="module-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li class="nav-bar-cell1-rev">Module</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="../overview-tree.html">Tree</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html#module">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Module:</p>
<ul>
<li><a href="#module-description">Description</a></li>
<li>Modules</li>
<li><a href="#packages-summary">Packages</a></li>
<li>Services</li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Module:&nbsp;</li>
<li><a href="#module-description">Description</a>&nbsp;|&nbsp;</li>
<li>Modules&nbsp;|&nbsp;</li>
<li><a href="#packages-summary">Packages</a>&nbsp;|&nbsp;</li>
<li>Services</li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Module org.klojang.templates" class="title">Module org.klojang.templates</h1>
</div>
<hr>
<div class="module-signature">module <span class="element-name">org.klojang.templates</span></div>
<section class="module-description" id="module-description">
<!-- ============ MODULE DESCRIPTION =========== -->
<div class="block"><p>
 <i>Klojang Templates</i> is a templating API written with two goals in
 mind:
 </p>
 <p>
 &#x25c6; Writing templates should be so simple that there is essentially no
 learning curve.<br/> &#x25c6; Provide a rich en flexible API for populating the
 templates that compensates for their simplicity.
 </p>
 <p>
 In short: leverage the skills of Java programmers, rather than make them learn
 what, in effect, amounts to a whole new language.
 </p>
 <h2>Syntax</h2>
 <p>
 A Klojang template consists of the following elements:
 </p>
 <p>
 <b>Boilerplate Text</b><br/>
 This could be HTML, but it could equally well be anything else. <i>Klojang
 Templates</i> is not biased towards any particular output format. However,
 <i>Klojang Templates</i> does provide some extra help when writing HTML
 templates, notable in the form of a few predefined
 <a href="org/klojang/templates/VarGroup.html" title="class in org.klojang.templates">variable groups</a>.
 </p>
 <p>
 <b>Template Variables</b><br/>
 Template variables look like this: <code>~%city%</code>. The variable name can
 optionally be prefixed with the name of a
 <a href="org/klojang/templates/VarGroup.html" title="class in org.klojang.templates">variable group</a>: <code>~%html:city%</code>.
 When populating a template through
 <a href="org/klojang/templates/RenderSession.html#insert(java.lang.Object,java.lang.String...)"><code>RenderSession.insert()</code></a> or
 <a href="org/klojang/templates/RenderSession.html#populate(java.lang.String,java.lang.Object,java.lang.String...)"><code>RenderSession.populate()</code></a>, a variable name may be a
 <a href="https://klojang4j.github.io/klojang-invoke/1/api/org.klojang.invoke/org/klojang/path/Path.html" title="class or interface in org.klojang.path" class="external-link">path</a> through the source data object passed to
 these methods. For example: <code>~%employee.address.city%</code>. Since you may be
 populating your templates with hash maps, in which case variable names would
 correspond to map keys, there are hardly any constraints on what constitutes a
 valid variable name (or path segment):<br/>&#x25c6; it must contain at least one
 character<br/>&#x25c6; it must not contain any of the following characters:
 <code>~%.:\r\n\0</code>.<br/>Obviously, when using records or JavaBeans as source data,
 you will be more constrained in your choice of variable names: they must be valid
 Java identifiers.
 </p>
 <p>
 <b>Nested Templates</b><br/>
 In <i>Klojang Templates</i> you can embed templates in other templates.
 Syntactically, this happens either either via <i><b>inline templates</b></i> or
 via <i><b>included templates</b></i>.
 </p>
 <p>
 Within an HTML template, inline templates would look like this:
 </p>
 <blockquote><pre><code>
 &lt;html&gt;
 &lt;body&gt;
   ~%%begin:employees%
     &lt;p&gt;First name: ~%firstName%&lt;/p&gt;
     &lt;p&gt;Last name: ~%lastName%&lt;/p&gt;
   ~%%end:employees%
 &lt;/body&gt;
 &lt;/html&gt;
 </code></pre></blockquote>
 <p>
 Included templates look like this:
 </p>
 <blockquote><pre><code>
 &lt;html&gt;
 &lt;body&gt;
   ~%%include:/static/views/employees.html%%
 &lt;/body&gt;
 &lt;/html&gt;
 </code></pre></blockquote>
 <p>
 And the contents of employees.html would then be something like this:
 </p>
 <blockquote><pre><code>
   &lt;p&gt;First name: ~%firstName%&lt;/p&gt;
   &lt;p&gt;Last name: ~%lastName%&lt;/p&gt;
 </code></pre></blockquote>
 <p>
 The name of an included template by default is the basename of the include path
 ("employees" in the example above). However, you can also use the following
 syntax:
 </p>
 <blockquote><pre><code>
 ~%%include:employees:/static/views/employees-2023-01-01.html%%
 </code></pre></blockquote>
 <p>
 <b>Placeholders</b><br/>
 A placeholder is a block of text inside a pair of <code>&lt;!--%--&gt;</code> tokens. The
 tokens and the text are removed when the template is rendered. However, since
 <code>&lt;!--%--&gt;</code> is a self-closed HTML comment, the placeholder text between a
 pair of these tokens will be visible when viewing the raw template in a browser. A
 nested template may contain placeholders, but you cannot place a pair of
 <code>&lt;!--%--&gt;</code> tokens around a nested template.
 <p>
 <b>Ditch Blocks</b><br/>
 A ditch block is a block of text inside a pair of <code>&lt;!--%%--&gt;</code> tokens. The
 tokens and the text are removed when the template is rendered. Ditch blocks really
 are comments, comparable to slash-star comments in Java. You can place
 <code>&lt;!--%%--&gt;</code> tokens around variables or nested templates, causing them to be
 "commented out", but you cannot place <code>&lt;!--%%--&gt;</code> tokens
 <i>inside</i> any of the other syntax elements listed here.
 </p>
 <h3>HTML Comment Wrapping</h3>
 <p>
 <i>(NB This section is only relevant if your goal is to create templates that
 will render flawlessly in a browser in their raw, unprocessed state</i>.)
 </p>
 <p>
 Variables, inline templates and included templates can all be placed in HTML
 comments with out this making a difference in how the template is rendered. For
 example <code>&lt;!--&nbsp;~%city%&nbsp;--&gt;</code> renders just like
 <code>~%city%</code>. If <code>city</code> is set to "Paris", then the entire string
 "&lt;!--&nbsp;~%city%&nbsp;--&gt;" is replaced with "Paris" when the template is
 rendered. You can have either one space character on either side of the variable,
 or none at all (<code>&lt;!--~%city%--&gt;</code>). Multiple spaces or other characters are
 not allowed. The same applies when wrapping inline templates and included
 templates in HTML comments.
 </p>
 <p>
 For included templates, HTML comment wrapping would look like this:
 <code>&lt;!-- ~%%include:/path/to/foo.html%% --&gt;</code>.
 </p>
 <p>
 For inline templates you can either wrap just the begin and and tags of the inline
 template, or you can wrap the entire inline template in HTML comments:
 </p>
 <blockquote><pre><code>
 &lt;table&gt;
     &lt;!-- ~%%begin:employee% --&gt;
     &lt;tr&gt;&lt;td&gt;~%firstName%&lt;/td&gt;&lt;td&gt;~%lastName%&lt;/td&gt;&lt;/tr&gt;
     &lt;!-- ~%%end:employee% --&gt;
 &lt;/table&gt;
 </code></pre></blockquote>
 <p>
 Versus:
 </p>
 <blockquote><pre><code>
 &lt;table&gt;
     &lt;!-- ~%%begin:employee%
     &lt;tr&gt;&lt;td&gt;~%firstName%&lt;/td&gt;&lt;td&gt;~%lastName%&lt;/td&gt;&lt;/tr&gt;
     ~%%end:employee% --&gt;
 &lt;/table&gt;
 </code></pre></blockquote>

 <h2>Using the API</h2>
 <p>
 Here are two fairly typical examples of using <i>Klojang Templates</i> within
 JAX-RS. They produce the same result by different means.
 </p>
 <blockquote><pre><code>
 public class EmployeeResource {

  EmployeeDao dao;

  @GET
  @Path("/{id}")
  public String find(@PathParam("id") int id) {
    Employee emp = dao.find(id);
    Template template = Template.fromResource(getClass(), "/views/employee.html");
    RenderSession session = template.newRenderSession();
    return session
      .set("firstName", emp.getFirstName())
      .set("lastName", emp.getLastName())
      .render();
  }
 }
 </code></pre></blockquote>

 <blockquote><pre><code>
 public class EmployeeResource {

  EmployeeDao dao;

  @GET
  @Path("/{id}")
  public StreamingOutput find(@PathParam("id") int id) {
    Employee employee = dao.find(id);
    Template template = Template.fromResource(getClass(), "/views/employee.html");
    RenderSession session = template.newRenderSession()
    session.insert(employee);
    return session::render;
  }
 }
 </code></pre></blockquote></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<section class="packages-summary" id="packages-summary">
<!-- ============ PACKAGES SUMMARY =========== -->
<h2>Packages</h2>
<div id="package-summary-table">
<div class="caption"><span>Exports</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color package-summary-table package-summary-table-tab1"><a href="org/klojang/templates/package-summary.html">org.klojang.templates</a></div>
<div class="col-last even-row-color package-summary-table package-summary-table-tab1">
<div class="block">Main package of this module.</div>
</div>
<div class="col-first odd-row-color package-summary-table package-summary-table-tab1"><a href="org/klojang/templates/name/package-summary.html">org.klojang.templates.name</a></div>
<div class="col-last odd-row-color package-summary-table package-summary-table-tab1">
<div class="block">Various <a href="org/klojang/templates/NameMapper.html" title="interface in org.klojang.templates"><code>NameMapper</code></a> implementations for translating
 names using one naming convention into names using another naming convention.</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="http://www.naturalis.nl">Naturalis Biodiversity Center</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
