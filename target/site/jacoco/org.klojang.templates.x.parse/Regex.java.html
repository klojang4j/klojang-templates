<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Regex.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Klojang Templates</a> &gt; <a href="index.source.html" class="el_package">org.klojang.templates.x.parse</a> &gt; <span class="el_source">Regex.java</span></div><h1>Regex.java</h1><pre class="source lang-java linenums">package org.klojang.templates.x.parse;

import java.util.regex.Pattern;

import static java.util.regex.Pattern.compile;

<span class="nc" id="L7">public final class Regex {</span>

  private static final int MULTILINE = Pattern.MULTILINE | Pattern.DOTALL;

  private static final String REGEX_CMT_START = &quot;&lt;!--\\s*&quot;;

  private static final String REGEX_CMT_END = &quot;\\s*--&gt;&quot;;

  /**
   * Regular expression for inline group name prefixes, as in: ~%prefix:varname%.
   */
  static final String REGEX_PREFIX = &quot;([a-zA-Z][a-zA-Z0-9_\\-]*)&quot;;

  static final String REGEX_NAME = &quot;([a-zA-Z0-9_\\-]+)&quot;;
  static final String REGEX_PATH
      = &quot;(&quot;
      + REGEX_NAME
      + &quot;(\\.&quot; + REGEX_NAME + &quot;)*&quot;
      + &quot;)&quot;;

  static final String REGEX_VARIABLE
      = &quot;~%&quot;
      + &quot;(&quot; + REGEX_PREFIX + &quot;:)?&quot;
      + REGEX_PATH
      + &quot;%&quot;;

  static final String REGEX_CMT_VARIABLE
      = REGEX_CMT_START
      + REGEX_VARIABLE
      + REGEX_CMT_END;

  static final String REGEX_INLINE_TEMPLATE
      = &quot;~%%begin:&quot; + REGEX_NAME + &quot;%&quot;
      + &quot;(.*?)&quot;
      + &quot;~%%end:\\1%&quot;;

  // Used only for syntax error detection:
  static final String REGEX_INLINE_TEMPLATE_BEGIN = &quot;~%%begin:&quot; + REGEX_NAME + &quot;%&quot;;

  static final String REGEX_INLINE_TEMPLATE_END = &quot;~%%end:&quot; + REGEX_NAME + &quot;%&quot;;

  static final String REGEX_CMT_INLINE_TEMPLATE
      = REGEX_CMT_START
      + REGEX_INLINE_TEMPLATE
      + REGEX_CMT_END;

  static final String REGEX_INCLUDE_PATH
      = &quot;([a-zA-Z0-9_~:;/?#!$&amp;%,@+.=\\-\\[\\]\\(\\)]+?)&quot;;

  static final String REGEX_INCLUDED_TEMPLATE
      = &quot;~%%include:&quot;
      + &quot;(&quot; + REGEX_NAME + &quot;:)?&quot;
      + REGEX_INCLUDE_PATH
      + &quot;%%&quot;;

  static final String CMT_REGEX_INCLUDED_TEMPLATE
      = REGEX_CMT_START
      + REGEX_INCLUDED_TEMPLATE
      + REGEX_CMT_END;

  // Used only for syntax error detection:
  static final String REGEX_DITCH_TAG = &quot;&lt;!--%%(.*?)--&gt;&quot;;

  static final String REGEX_DITCH_BLOCK
      = REGEX_DITCH_TAG + &quot;(.*?)&quot; + REGEX_DITCH_TAG;

  static final String PLACEHOLDER_TAG = &quot;&lt;!--%--&gt;&quot;;

  static final String REGEX_PLACEHOLDER = &quot;&lt;!--%--&gt;(.*?)&lt;!--%--&gt;&quot;;

<span class="fc" id="L77">  public static final Pattern VARIABLE = compile(REGEX_VARIABLE);</span>

<span class="fc" id="L79">  public static final Pattern CMT_VARIABLE = compile(REGEX_CMT_VARIABLE);</span>

<span class="fc" id="L81">  public static final Pattern INLINE_TEMPLATE</span>
<span class="fc" id="L82">      = compile(REGEX_INLINE_TEMPLATE, MULTILINE);</span>

<span class="fc" id="L84">  public static final Pattern INLINE_TEMPLATE_BEGIN</span>
<span class="fc" id="L85">      = compile(REGEX_INLINE_TEMPLATE_BEGIN);</span>

<span class="fc" id="L87">  public static final Pattern INLINE_TEMPLATE_END</span>
<span class="fc" id="L88">      = compile(REGEX_INLINE_TEMPLATE_END);</span>

<span class="fc" id="L90">  public static final Pattern CMT_INLINE_TEMPLATE</span>
<span class="fc" id="L91">      = compile(REGEX_CMT_INLINE_TEMPLATE, MULTILINE);</span>

<span class="fc" id="L93">  public static final Pattern INCLUDE_PATH = compile(REGEX_INCLUDE_PATH);</span>

<span class="fc" id="L95">  public static final Pattern INCLUDED_TEMPLATE = compile(REGEX_INCLUDED_TEMPLATE);</span>

<span class="fc" id="L97">  public static final Pattern CMT_INCLUDED_TEMPLATE</span>
<span class="fc" id="L98">      = compile(CMT_REGEX_INCLUDED_TEMPLATE);</span>

<span class="fc" id="L100">  public static final Pattern DITCH_TAG = compile(REGEX_DITCH_TAG, MULTILINE);</span>

<span class="fc" id="L102">  public static final Pattern DITCH_BLOCK = compile(REGEX_DITCH_BLOCK, MULTILINE);</span>

<span class="fc" id="L104">  public static final Pattern PLACEHOLDER = compile(REGEX_PLACEHOLDER, MULTILINE);</span>

  public static final String PLACEHOLDER_START_END = &quot;&lt;!--%--&gt;&quot;;

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>